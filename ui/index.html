<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Golf</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Top Navigation Buttons -->
        <div style="display: flex; gap: 1rem; position: absolute; top: 1rem; right: 1rem; z-index: 10;">
            <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" style="position: static;">‚òÄÔ∏è Light
                Mode</button>
            <button id="settings-toggle" onclick="openSettings()"
                style="padding: 0.5rem 1rem; background: var(--glass); border: 1px solid var(--glass-border); border-radius: 8px; color: var(--text); cursor: pointer; font-family: Outfit, sans-serif;">‚öôÔ∏è
                AI Settings</button>
        </div>

        <!-- Hidden Settings Modal -->
        <div id="settings-modal" class="hidden"
            style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; display: flex; align-items: center; justify-content: center;">
            <div class="card glass-morph" style="width: 400px; padding: 2rem;">
                <h3>ü§ñ API Configuration</h3>
                <p>Enter your Google Gemini API Key to enable the AI Financial Tutor.</p>
                <div class="form-group" style="margin-top: 1rem;">
                    <input type="password" id="gemini-key-input" placeholder="AIzaSy...">
                    <button onclick="saveSettings()" style="margin-top: 1rem;">Save & Close</button>
                </div>
            </div>
        </div>

        <header class="glass-morph">
            <h1>Financial Golf ‚õ≥</h1>
            <p>Welcome, Student! Master your money, master the green.</p>
        </header>

        <main>
            <section class="card glass-morph">
                <h2>Ransomware Protection Status</h2>
                <div id="security-status" class="status-badge checking">Checking Security API...</div>
            </section>

            <section class="card glass-morph" style="margin-top: 1rem;">
                <h2>Student Progress Dashboard</h2>
                <div class="status-badge"
                    style="background: var(--glass); display: flex; justify-content: space-around;">
                    <div>‚õ≥ Golf Coins: <span id="coin-count" style="color: #fbbf24; font-size: 1.2rem;">0</span></div>
                    <div>üî• Quiz Streak: <span id="streak-count" style="color: #ef4444; font-size: 1.2rem;">0</span>
                    </div>
                </div>
            </section>

            <section class="grid">
                <div class="card glass-morph">
                    <h3>Compound Interest Calculator</h3>
                    <p>Powered by our High-Performance Rust Engine</p>
                    <div class="form-group">
                        <select id="currency">
                            <option value="$" selected>USD ($)</option>
                            <option value="‚Çπ">INR (‚Çπ)</option>
                        </select>
                        <input type="number" id="principal" placeholder="Starting Amount" value="1000">
                        <input type="number" id="current-age" placeholder="Current Age" value="18">
                        <input type="number" id="duration" placeholder="Duration (Years)" value="30">
                        <input type="number" id="rate" placeholder="Interest Rate (%)" value="8" step="0.1">
                        <button id="btn-calc-interest" onclick="calculateInterest()">Calculate Target</button>
                        <button id="btn-calc-table" onclick="calculateTable()">Generate Growth Table</button>
                    </div>
                    <div id="interest-result" class="result"></div>
                    <div id="table-loading" class="result"></div>
                    <div class="table-container">
                        <canvas id="growthChart" style="display: none;"></canvas>
                    </div>
                </div>

                <div class="card glass-morph">
                    <h3>Daily Financial Quiz</h3>
                    <p>Powered by our Secure Native Quiz Engine</p>
                    <button onclick="loadQuiz()">Load Today's Quiz</button>
                    <div id="quiz-container"></div>
                </div>
            </section>
            <section class="grid">
                <div class="card glass-morph">
                    <h3>Rent vs Buy Simulator</h3>
                    <p>Powered by our High-Performance Rust Engine</p>
                    <div class="form-group">
                        <input type="number" id="bvr-rent" placeholder="Monthly Rent" value="1500">
                        <input type="number" id="bvr-home" placeholder="Home Price" value="400000">
                        <input type="number" id="bvr-down" placeholder="Down Payment" value="80000">
                        <input type="number" id="bvr-rate" placeholder="Mortgage Rate (%)" value="6.5" step="0.1">
                        <button id="btn-calc-bvr" onclick="calculateBVR()">Compare Crossover</button>
                    </div>
                    <div id="bvr-result" class="result"></div>
                </div>

                <div class="card glass-morph">
                    <h3>Debt Payoff Engine</h3>
                    <p>Avalanche vs Snowball (Native Calculation)</p>
                    <div class="form-group">
                        <input type="number" id="debt-1" placeholder="Credit Card Debt" value="5000">
                        <input type="number" id="debt-2" placeholder="Student Loan Debt" value="20000">
                        <input type="number" id="debt-pay" placeholder="Total Monthly Payment" value="800">
                        <button id="btn-calc-debt" onclick="calculateDebt()">Run Payoff Algorithm</button>
                    </div>
                    <div id="debt-result" class="result"></div>
                </div>

                <div class="card glass-morph">
                    <h3>Live Global Markets</h3>
                    <p>Real-Time Async Sync via Rust & Reqwest</p>
                    <div class="form-group">
                        <input type="text" id="market-ticker" placeholder="Stock Symbol (e.g. MSFT)" value="MSFT">
                        <button id="btn-fetch-market" onclick="fetchMarket()">Ping Wall Street</button>
                    </div>
                    <div id="market-result" class="result" style="font-size: 2rem; margin-top: 1rem;"></div>
                </div>

                <div class="card glass-morph">
                    <h3>Paper Trading Simulator üìà</h3>
                    <p>Trade real stocks using your Golf Coins!</p>
                    <div class="form-group" style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <input type="text" id="trade-ticker" placeholder="Symbol" style="flex: 2;">
                        <input type="number" id="trade-shares" placeholder="Shares" value="1" style="flex: 1;">
                    </div>
                    <div class="form-group" style="display: flex; gap: 0.5rem;">
                        <button id="btn-buy" onclick="buyStock()" style="flex: 1; background: #10b981;">Buy</button>
                        <button id="btn-sell" onclick="sellStock()" style="flex: 1; background: #ef4444;">Sell</button>
                    </div>
                    <div id="trade-result" class="result"
                        style="margin-top: 0.5rem; font-size: 0.9rem; color: #fbbf24; font-weight: bold;">Loading
                        Balance...</div>
                    <div id="portfolio-display"
                        style="margin-top: 1rem; border-top: 1px solid var(--glass-border); padding-top: 0.5rem;">
                        <strong>Your Portfolio:</strong>
                        <div id="portfolio-list"
                            style="font-size: 0.9rem; margin-top: 0.5rem; max-height: 100px; overflow-y: auto;">
                            <!-- Populated via JS -->
                        </div>
                    </div>
                </div>
            </section>

            <section class="grid" style="grid-template-columns: 1fr;">
                <div class="card glass-morph" style="display: flex; flex-direction: column; height: 500px;">
                    <h3>ü§ñ AI Financial Tutor (Gemini Pro)</h3>
                    <p>Ask any money question! I'll explain it simply.</p>

                    <div id="chat-history"
                        style="flex: 1; overflow-y: auto; background: var(--input-bg); border-radius: 10px; padding: 1rem; margin-bottom: 1rem; border: 1px solid var(--glass-border); display: flex; flex-direction: column; gap: 0.5rem;">
                        <div
                            style="background: var(--glass); padding: 0.5rem; border-radius: 5px; align-self: flex-start; max-width: 80%;">
                            <strong>Tutor:</strong> Hi there! I'm your AI money guide. What would you like to learn
                            today?
                        </div>
                    </div>

                    <div class="form-group" style="display: flex; gap: 0.5rem; margin-top: auto;">
                        <input type="text" id="chat-input" placeholder="e.g., What is a Roth IRA?" style="flex: 1;"
                            onkeypress="if(event.key === 'Enter') sendChat()">
                        <button id="btn-send-chat" onclick="sendChat()"
                            style="width: auto; padding: 0 1.5rem;">Send</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Hidden Game Container -->
    <div id="golf-game-overlay" class="hidden">
        <div class="game-container">
            <h2>Secret Golf Link Activated! ü§´</h2>
            <canvas id="golfCanvas" width="600" height="400"></canvas>
            <button onclick="closeGolf()">Return to Studies</button>
        </div>
    </div>

    <script src="main.js"></script>
</body>

</html>